
# Run ls-lint on staged files
CHANGED_FILES=$(git diff --cached --name-only --diff-filter=d)

if [ -n "$CHANGED_FILES" ]; then
  echo "Running ls-lint on changed files: $CHANGED_FILES"
  pnpm exec ls-lint $CHANGED_FILES
  
  echo "Running prettier on changed files: $CHANGED_FILES"
  pnpm exec prettier --ignore-unknown --no-error-on-unmatched-pattern --write $CHANGED_FILES
  git add $CHANGED_FILES
fi

pnpm knip
pnpm turbo typecheck lint test --output-logs=new-only